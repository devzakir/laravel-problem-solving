(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{313:function(n,t,e){var a=e(534);"string"==typeof a&&(a=[[n.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};e(6)(a,o);a.locals&&(n.exports=a.locals)},314:function(n,t,e){var a=e(536);"string"==typeof a&&(a=[[n.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};e(6)(a,o);a.locals&&(n.exports=a.locals)},533:function(n,t,e){"use strict";e(313)},534:function(n,t,e){(n.exports=e(5)(!1)).push([n.i,".mask[data-v-5ed18ca6] {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 499;\n}\n.mask .inner[data-v-5ed18ca6] {\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  background-color: #fff;\n  border-radius: 10px;\n  z-index: 500;\n  padding: 30px 20px;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n}\n.mask h3[data-v-5ed18ca6] {\n  font-size: 16px;\n  font-weight: normal;\n  text-align: center;\n  margin-bottom: 20px;\n}\n.close_btn[data-v-5ed18ca6] {\n  position: absolute;\n  right: 10px;\n  top: 10px;\n}\n.form__row[data-v-5ed18ca6] {\n  display: flex;\n  align-items: center;\n  margin-bottom: 15px;\n}\n.form__row > label[data-v-5ed18ca6] {\n  width: 100px;\n  font-weight: 600;\n}\n.form__row .group[data-v-5ed18ca6] {\n  display: flex;\n}\n.form__row .group p[data-v-5ed18ca6] {\n  display: flex;\n  align-items: center;\n  width: 100px;\n}\n.form__actions[data-v-5ed18ca6] {\n  display: flex;\n  padding-top: 20px;\n  justify-content: center;\n  align-items: center;\n}\n.form__actions button[data-v-5ed18ca6] {\n  width: 140px;\n  height: 40px;\n  border-radius: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 0;\n}\n.form__actions button[data-v-5ed18ca6]:first-of-type {\n  background-color: #fff;\n  margin-right: 15px;\n  border: 1px solid #ccc;\n}\n.form__actions button[data-v-5ed18ca6]:last-of-type {\n  background-color: var(--accent-color);\n  color: #fff;\n}",""])},535:function(n,t,e){"use strict";e(314)},536:function(n,t,e){(n.exports=e(5)(!1)).push([n.i,".column_setting[data-v-fff65f12] {\n  padding: 20px 30px;\n}\n.note[data-v-fff65f12] {\n  font-size: 14px;\n  margin-top: 12px;\n  margin-bottom: 20px;\n  color: #4B4B4B;\n}\n.part1[data-v-fff65f12] {\n  position: relative;\n}\n.drag_part[data-v-fff65f12] {\n  width: 1050px;\n  border: 1px solid var(--border-color);\n  border-radius: 5px;\n  background: #fff;\n  padding: 25px 40px 0;\n  display: flex;\n  flex-wrap: wrap;\n  position: relative;\n  margin-bottom: 60px;\n}\n.drag_part .drag__item[data-v-fff65f12] {\n  height: 50px;\n  padding-left: 27px;\n  padding-right: 55px;\n  background-color: #8D8B8B;\n  color: #fff;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  position: relative;\n  margin-right: 30px;\n  margin-bottom: 35px;\n  border-radius: 5px;\n  cursor: pointer;\n}\n.drag_part .drag__item img[data-v-fff65f12] {\n  position: absolute;\n  left: 5px;\n  top: 50%;\n  transform: translate(0, -50%);\n}\n.arrow[data-v-fff65f12] {\n  position: absolute;\n  left: 50%;\n  bottom: 0;\n  transform: translate(0, 100%);\n  width: 80px;\n}\n.drop_part[data-v-fff65f12] {\n  background-color: #fff;\n  border: 1px solid var(--border-color);\n  border-radius: 5px;\n  padding: 40px 45px;\n  margin-top: 10px;\n  width: 1050px;\n  overflow: auto;\n}\n.drop_part .drop_part_heading[data-v-fff65f12] {\n  display: flex;\n  align-items: center;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n  padding-right: 160px;\n}\n.drop_part .drop_part_heading .drop__item[data-v-fff65f12] {\n  height: 50px;\n  padding-left: 27px;\n  padding-right: 55px;\n  background-color: #8D8B8B;\n  color: #fff;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  position: relative;\n  margin-right: 10px;\n  border-radius: 5px;\n  word-break: keep-all;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n  cursor: pointer;\n  position: relative;\n}\n.drop_part .drop_part_heading .drop__item img[data-v-fff65f12] {\n  position: absolute;\n  left: 5px;\n  top: 50%;\n  transform: translate(0, -50%);\n}\n.drop_part .drop_part_heading .drop__item input[data-v-fff65f12] {\n  height: 30px;\n}\n.drop_part .drop_part_heading .drop__item select[data-v-fff65f12] {\n  height: 30px;\n  margin-left: 5px;\n}\n.drop_part .drop_part_heading .drop__item button[data-v-fff65f12] {\n  height: 30px;\n  padding-left: 8px;\n  padding-right: 8px;\n  border-radius: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #fff;\n  border: 0;\n  margin-left: 10px;\n}\n.drop_part .drop_part_heading .drop__item .remove_btn[data-v-fff65f12] {\n  position: absolute;\n  right: -10px;\n  top: -10px;\n}\n.drop_part .drop_part_heading .drop__item .remove_btn img[data-v-fff65f12] {\n  width: 35px;\n  position: relative;\n  left: 0;\n  top: 0;\n  transform: none;\n}\n.actions[data-v-fff65f12] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-top: 40px;\n}\n.actions button[data-v-fff65f12] {\n  width: 120px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16);\n  color: #fff;\n  border: 0;\n}\n.actions button[data-v-fff65f12]:first-of-type {\n  background-color: var(--border-color);\n  margin-right: 60px;\n}\n.actions button[data-v-fff65f12]:last-of-type {\n  background-color: var(--accent-color);\n}\n.confirm_text[data-v-fff65f12] {\n  text-align: center;\n}",""])},70:function(n,t,e){"use strict";e.r(t);var a=e(0),o=e.n(a),r={props:["tempTax","tempTaxType"],data:function(){return{tax_type:1,tax:1}},mounted:function(){this.tax_type=this.$props.tempTaxType,this.tax=this.$props.tempTax},methods:{closeModal:function(){this.$emit("onCloseModal")},selectTaxType:function(n){this.tax_type=n},selectTax:function(n){this.tax=n},saveTax:function(){this.$emit("onSaveTax",this.tax,this.tax_type)}}},i=(e(533),e(3)),s=Object(i.a)(r,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"mask"},[e("div",{staticClass:"inner"},[e("h3",[n._v("消費税の設定をします。")]),n._v(" "),e("a",{staticClass:"close_btn",on:{click:n.closeModal}},[e("img",{attrs:{src:"/asset/icons/close.svg"}})]),n._v(" "),e("div",{staticClass:"form__row"},[e("label",[n._v("税設定")]),n._v(" "),e("div",{staticClass:"group"},[e("p",[e("label",[e("input",{attrs:{type:"radio",name:"tax_type"},domProps:{checked:1==n.tax_type},on:{click:function(t){return n.selectTaxType(1)}}}),n._v("税抜")])]),n._v(" "),e("p",[e("label",[e("input",{attrs:{type:"radio",name:"tax_type"},domProps:{checked:2==n.tax_type},on:{click:function(t){return n.selectTaxType(2)}}}),n._v("税込")])]),n._v(" "),e("p",[e("label",[e("input",{attrs:{type:"radio",name:"tax_type"},domProps:{checked:3==n.tax_type},on:{click:function(t){return n.selectTaxType(3)}}}),n._v("非課税")])])])]),n._v(" "),e("div",{staticClass:"form__row"},[e("label",[n._v("軽減税率")]),n._v(" "),e("div",{staticClass:"group"},[e("p",[e("label",[e("input",{attrs:{type:"radio",name:"tax",disabled:3==n.tax_type},domProps:{checked:2==n.tax},on:{click:function(t){return n.selectTax(2)}}}),n._v("設定する")])]),n._v(" "),e("p",[e("label",[e("input",{attrs:{type:"radio",name:"tax",disabled:3==n.tax_type},domProps:{checked:1==n.tax},on:{click:function(t){return n.selectTax(1)}}}),n._v("設定しない")])])])]),n._v(" "),e("div",{staticClass:"form__actions"},[e("button",{on:{click:n.closeModal}},[n._v("キャンセル")]),n._v(" "),e("button",{on:{click:n.saveTax}},[n._v("決定")])])])])}),[],!1,null,"5ed18ca6",null).exports,c=e(2),p=e.n(c);function d(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,a)}return e}function l(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?d(Object(e),!0).forEach((function(t){f(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):d(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function f(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function u(n,t,e,a,o,r,i){try{var s=n[r](i),c=s.value}catch(n){return void e(n)}s.done?t(c):Promise.resolve(c).then(a,o)}function m(n){return function(){var t=this,e=arguments;return new Promise((function(a,o){var r=n.apply(t,e);function i(n){u(r,a,o,i,s,"next",n)}function s(n){u(r,a,o,i,s,"throw",n)}i(void 0)}))}}var _={layout:"recipient",middleware:"recipient",components:{TaxSettingModal:s},data:function(){var n=this;return{available_columns:[],picked_columns:[],options:{dropzoneSelector:"ul",draggableSelector:"li",handlerSelector:null,reactivityEnabled:!0,multipleDropzonesItemsDraggingEnabled:!0,showDropzoneAreas:!0,onDrop:function(n){},onDragstart:function(n){},onDragenter:function(n){},onDragover:function(n){},onDragend:function(n){}},headerOptions:{title:"項目設定"},footerOptions:{btn1:"キャンセル",btn2:"同意する",btn1OnClick:function(){n.$vm2.close("confirm_modal")},btn2OnClick:function(){n.changeProductColumnConfirm(),n.$vm2.close("confirm_modal")}},isShowModal:!1,tempTax:null,tempTaxType:null,last_updated:null}},mounted:function(){this.init()},methods:{closeModal:function(){this.isShowModal=!1},settingTax:function(n,t){this.tempTax=n,this.tempTaxType=t,this.isShowModal=!0},init:function(){var n=this;return m(o.a.mark((function t(){var e,a,r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.post("/recipienter/get_column_info");case 2:e=t.sent,a=e.data,(r=a.columns.filter((function(n){return a.userColumns.length>0?0==a.userColumns.find((function(t){return t.product_column_id==n.id})).picked:0==n.picked})).map((function(n){if(a.userColumns.length>0){var t=a.userColumns.find((function(t){return t.product_column_id==n.id}));return l(l({},n),{},{order:t.order,name:t.nickname?t.nickname:n.name,tax:t.tax,tax_type:t.tax_type})}return n}))).sort((function(n,t){return n.order-t.order})),n.available_columns=r,(i=a.columns.filter((function(n){return a.userColumns.length>0?1==a.userColumns.find((function(t){return t.product_column_id==n.id})).picked:1==n.picked})).map((function(n){if(a.userColumns.length>0){var t=a.userColumns.find((function(t){return t.product_column_id==n.id}));return l(l({},n),{},{order:t.order,name:t.nickname?t.nickname:n.name,tax:t.tax,tax_type:t.tax_type})}return n}))).sort((function(n,t){return n.order-t.order})),n.picked_columns=i;case 10:case"end":return t.stop()}}),t)})))()},changeFreeSpace:function(n,t,e){var a=this.picked_columns.slice();a=a.map((function(e){return e.slug==t?l(l({},e),{},{name:n.target.value}):e})),this.picked_columns=a},changePriceTax:function(n){var t=this.picked_columns.slice();t=t.map((function(t){return"price"==t.slug?l(l({},t),{},{tax:n.target.value}):t})),this.picked_columns=t},changeTax:function(n,t){var e=this.picked_columns.slice();e=e.map((function(e){return"price"==e.slug?l(l({},e),{},{tax:n,tax_type:t}):e})),this.picked_columns=e,this.isShowModal=!1},added:function(n){var t=n.detail.ids[0],e=n.detail.index,a=this.available_columns,o=0,r=null;a.forEach((function(n,e){n.id==t&&(o=e,r=n)})),a.splice(o,1),this.available_columns=a,this.picked_columns.splice(e,0,r)},reordered:function(n){var t=n.detail.ids[0],e=n.detail.index,a=this.picked_columns,o=0,r=null;a.forEach((function(n,e){n.id==t&&(o=e,r=n)})),a.splice(o,1),this.picked_columns=a,this.picked_columns.splice(e,0,r)},removeItem:function(n,t){this.available_columns.push(n),this.picked_columns.splice(t,1)},toProductListScreen:function(){this.$router.push({name:"recipient.product"})},changeProductColumn:function(){this.$vm2.open("confirm_modal")},changeProductColumnConfirm:function(){var n=this;return m(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.last_updated){t.next=5;break}if(!(p()().diff(n.last_updated,"minutes")<3)){t.next=5;break}return n.$swal("","最後登録した後３分間登録できません。"),t.abrupt("return");case 5:return n.picked_columns=n.picked_columns.map((function(n,t){return l(l({},n),{},{order:t,picked:1,tax:n.tax||1,tax_type:n.tax_type||1})})),n.available_columns=n.available_columns.map((function(t,e){return l(l({},t),{},{order:e+n.picked_columns.length,picked:0,tax:1,tax_type:1})})),e=n.picked_columns.concat(n.available_columns),t.prev=8,t.next=11,Promise.all(e.map(function(){var n=m(o.a.mark((function n(t){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,axios.post("/recipienter/change_product_column",t);case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()));case 11:n.last_updated=p()(),n.$swal("","項目設定しました"),t.next=17;break;case 15:t.prev=15,t.t0=t.catch(8);case 17:case"end":return t.stop()}}),t,null,[[8,15]])})))()},close:function(){this.$vm2.close("confirm_modal")}}},x=(e(535),Object(i.a)(_,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{directives:[{name:"drag-and-drop",rawName:"v-drag-and-drop:options",value:n.options,expression:"options",arg:"options"}],staticClass:"column_setting"},[e("h2",{staticClass:"page__title"},[n._v("項目設定")]),n._v(" "),e("div",{staticClass:"part1"},[e("p",{staticClass:"note"},[n._v("注文フォームに表示する項目をドラッグ＆ドロップで設定できます。")]),n._v(" "),e("ul",{staticClass:"drag_part"},[n._l(n.available_columns,(function(t,a){return e("li",{key:a,staticClass:"drag__item",attrs:{"data-id":t.id}},[e("img",{attrs:{src:"/asset/icons/drag_icon.svg"}}),n._v(" "),e("span",[n._v(n._s(t.name))])])})),n._v(" "),n._m(0)],2)]),n._v(" "),e("h2",{staticClass:"page__title page__title3"},[n._v("現在の注文フォーム")]),n._v(" "),e("div",{staticClass:"drop_part"},[e("ul",{staticClass:"drop_part_heading",on:{added:n.added,reordered:n.reordered}},n._l(n.picked_columns,(function(t,a){return e("li",{key:a,staticClass:"drop__item",attrs:{"data-id":t.id}},[e("img",{attrs:{src:"/asset/icons/drag_icon.svg"}}),n._v(" "),"free_space1"!=t.slug&&"free_space2"!=t.slug&&"free_space3"!=t.slug?e("span",[n._v(n._s(t.name))]):e("span",[e("input",{attrs:{placeholder:"フリースペース",type:"text"},domProps:{value:t.name},on:{change:function(e){return n.changeFreeSpace(e,t.slug,a)}}})]),n._v(" "),"price"==t.slug?e("span",[e("button",{on:{click:function(e){return n.settingTax(t.tax,t.tax_type)}}},[n._v("税設定")])]):n._e(),n._v(" "),0==t.needed?e("a",{staticClass:"remove_btn",on:{click:function(e){return n.removeItem(t,a)}}},[e("img",{attrs:{src:"/asset/icons/remove_icon.svg"}})]):n._e()])})),0)]),n._v(" "),e("div",{staticClass:"actions"},[e("button",{on:{click:n.toProductListScreen}},[n._v("商品一覧に戻る")]),n._v(" "),e("button",{on:{click:n.changeProductColumn}},[n._v("登録する")])]),n._v(" "),e("vue-modal-2",{attrs:{name:"confirm_modal",headerOptions:n.headerOptions,footerOptions:n.footerOptions},on:{"on-close":n.close}},[e("p",{staticClass:"confirm_text"},[n._v("項目設定を変更します。よろしいでしょうか？"),e("br"),n._v("※登録後３分間は変更ができません。")])]),n._v(" "),n.isShowModal?e("TaxSettingModal",{attrs:{tempTax:n.tempTax,tempTaxType:n.tempTaxType},on:{onCloseModal:n.closeModal,onSaveTax:n.changeTax}}):n._e()],1)}),[function(){var n=this.$createElement,t=this._self._c||n;return t("span",{staticClass:"arrow"},[t("img",{attrs:{src:"/asset/icons/arrow_bg.svg"}})])}],!1,null,"fff65f12",null));t.default=x.exports}}]);