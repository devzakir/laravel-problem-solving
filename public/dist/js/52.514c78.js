(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{312:function(e,t,n){var r=n(532);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,a);r.locals&&(e.exports=r.locals)},531:function(e,t,n){"use strict";n(312)},532:function(e,t,n){(e.exports=n(5)(!1)).push([e.i,".create__container[data-v-69ed368a] {\n  padding: 20px 30px;\n}\n.create__container .contact__info[data-v-69ed368a] {\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n  padding: 12px 14px;\n  border: 1px solid var(--border-color);\n  border-radius: 5px;\n  background-color: #fff;\n  margin-left: 50px;\n  margin-top: 20px;\n}\n.create__container .contact_heading[data-v-69ed368a] {\n  align-items: center;\n  margin-bottom: 14px;\n}\n.create__container .contact_heading .company_name[data-v-69ed368a] {\n  margin-left: 30px;\n  font-size: 12px;\n}\n.create__container .contact__form[data-v-69ed368a] {\n  padding-left: 20px;\n}\n.create__container .contact__form .form__row[data-v-69ed368a] {\n  margin-bottom: 4px;\n  display: flex;\n  align-items: center;\n}\n.create__container .contact__form .form__row label[data-v-69ed368a] {\n  font-size: 12px;\n  align-items: center;\n  width: 100px;\n  display: flex;\n}\n.create__container .contact__form .form__row label .must[data-v-69ed368a] {\n  width: 26px;\n  height: 12px;\n  font-size: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #D34555;\n  color: #fff;\n  margin-left: 3px;\n}\n.create__container .contact__form .form__row p[data-v-69ed368a] {\n  font-size: 12px;\n  flex: 1;\n}\n.create__container .contact__form .form__row p input[data-v-69ed368a], .create__container .contact__form .form__row p select[data-v-69ed368a] {\n  width: 100%;\n  height: 30px;\n  border: 1px solid var(--border-color);\n  padding-left: 10px;\n  padding-right: 10px;\n  font-size: 12px;\n  width: 316px;\n}\n.create__container .message__part[data-v-69ed368a] {\n  width: 800px;\n  border: 1px solid var(--border-color);\n  margin-left: 50px;\n  margin-top: 24px;\n  padding: 25px 32px;\n  background-color: #fff;\n}\n.create__container .message__part .to_client[data-v-69ed368a] {\n  font-size: 12px;\n  margin-bottom: 20px;\n}\n.create__container .message__part .message_input[data-v-69ed368a] {\n  display: block;\n  width: 100%;\n  height: 200px;\n  border: 1px solid var(--border-color);\n  padding: 4px 8px;\n  font-size: 12px;\n  margin-bottom: 26px;\n  resize: none;\n}\n.create__container .message__part .condition_input[data-v-69ed368a] {\n  display: block;\n  width: 100%;\n  height: 240px;\n  border: 1px solid var(--border-color);\n  padding: 4px 8px;\n  font-size: 12px;\n  margin-bottom: 26px;\n  resize: none;\n}\n.create__container .actions[data-v-69ed368a] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-top: 30px;\n}\n.create__container .actions button[data-v-69ed368a] {\n  width: 180px;\n  height: 35px;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n}\n.create__container .actions button[data-v-69ed368a]:first-of-type {\n  margin-right: 50px;\n  background-color: #fff;\n  border: 1px solid var(--border-color);\n}\n.create__container .actions button[data-v-69ed368a]:last-of-type {\n  background-color: var(--accent-color);\n  color: #fff;\n  border: 0;\n}\n.form__info[data-v-69ed368a] {\n  margin-bottom: 30px;\n}\n.textarea[data-v-69ed368a] {\n  position: relative;\n}\n.textarea textarea[data-v-69ed368a] {\n  background: transparent;\n  position: relative;\n  z-index: 2;\n}\n.textarea .placeholder[data-v-69ed368a] {\n  position: absolute;\n  left: 8px;\n  top: 4px;\n  font-size: 12px;\n  z-index: 0;\n  opacity: 0.7;\n}",""])},98:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={layout:"recipient",middleware:"recipient",data:function(){var e;return s(e={childRecipienters:[],users:[],from:null,to:null,title:"",content:"",address_info:"",step:1,order_form:null,forms:[]},"order_form",null),s(e,"toggle",!0),e},mounted:function(){console.log(this.$store.getters["recipienter_auth/user"],"___123123123"),this.init()},methods:{calcCompany:function(){var e=this;return this.to?this.users.find((function(t){return t.id==e.to})):null},calcLoginId:function(){var e=this;return this.to?this.users.find((function(t){return t.id==e.to})).email:""},calcUserName:function(){var e=this;return this.to?this.users.find((function(t){return t.id==e.to})).name:""},init:function(){var e=this;return i(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,axios.post("/recipienter/get_message_create_screen_ini",{id:e.$route.query.id});case 3:n=t.sent,r=n.data,e.childRecipienters=r.childRecipienters,e.order_form=r.order_form,e.forms=r.order_forms,e.getClientInfo(e.from),e.content="お取引先様\nいつも大変お世話になっております。\n株式会社".concat(e.$store.getters["recipienter_auth/user"].name,"の").concat(e.$store.getters["recipienter_auth/user"].tanto_name||"マスタ管理者","です。\n\nこのたび、Web上にも注文フォームをと用意いたしました。\n24時間いつでも注文可能となりますので、よろしければご利用ください。\n\nご不明な点がございましたらお気軽にご連絡ください。"),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(0);case 14:case"end":return t.stop()}}),t,null,[[0,12]])})))()},changeRecipienter:function(){this.getClientInfo(this.from)},getClientInfo:function(e){var t=this;return i(a.a.mark((function n(){var r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,axios.post("/recipienter/get_self_clients",{recipienter_id:e});case 3:r=n.sent,o=r.data,t.users=o.users,n.next=10;break;case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}}),n,null,[[0,8]])})))()},back:function(){2==this.step?this.step=1:this.$router.back()},next:function(){if(1==this.step){if(!this.from||!this.to||""==this.title||""==this.content||""==this.address_info)return void this.$swal("","必須項目を入力してください");if(!this.$route.query.id&&!this.order_form)return void this.$swal("","注文フォームを選択して下さい");this.step=2}else this.sendMessage()},sendMessage:function(){var e=this;return i(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,axios.post("/recipienter/create_order_form_message",{recipienter_id:e.from,user_id:e.to,user_name:e.calcUserName(),title:e.title,content:e.content,address_info:e.address_info,order_form_id:e.$route.query.id?e.$route.query.id:e.order_form});case 3:n=t.sent,n.data,e.$swal("","送信しました"),e.$router.push({name:"recipient.order_form"}),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))()},keyupChange:function(){0!==this.address_info.length?this.toggle=!1:this.toggle=!0}}},d=(n(531),n(3)),l=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"create__container"},[n("h2",{staticClass:"page__title"},[e._v("注文フォームの案内メール")]),e._v(" "),n("div",{staticClass:"contact__info"},[e._m(0),e._v(" "),n("div",{staticClass:"contact__form"},[e.$route.query.id?e._e():n("div",{staticClass:"form__row"},[n("label",[e._v("注文フォーム")]),e._v(" "),n("p",[n("select",{directives:[{name:"model",rawName:"v-model",value:e.order_form,expression:"order_form"}],attrs:{disabled:2==e.step},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.order_form=t.target.multiple?n:n[0]}}},e._l(e.forms,(function(t,r){return n("option",{key:r,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)])]),e._v(" "),n("div",{staticClass:"form__row"},[n("label",[e._v("差出人名")]),e._v(" "),n("p",[n("select",{directives:[{name:"model",rawName:"v-model",value:e.from,expression:"from"}],attrs:{disabled:2==e.step},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.from=t.target.multiple?n:n[0]},e.changeRecipienter]}},[n("option",{domProps:{value:e.$store.getters["recipienter_auth/user"].id}},[e._v(e._s(e.$store.getters["recipienter_auth/user"].name)+" "+e._s(1==e.$store.getters["recipienter_auth/user"].type?"マスターアカウント":e.$store.getters["recipienter_auth/user"].tanto_name))]),e._v(" "),e._l(e.childRecipienters,(function(t,r){return n("option",{key:r,domProps:{value:t.id}},[e._v(e._s(1==t.type?"マスタアカウント":t.tanto_name))])}))],2)])]),e._v(" "),n("div",{staticClass:"form__row"},[n("label",[e._v("宛先")]),e._v(" "),n("p",[n("select",{directives:[{name:"model",rawName:"v-model",value:e.to,expression:"to"}],attrs:{disabled:2==e.step},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.to=t.target.multiple?n:n[0]}}},e._l(e.users,(function(t,r){return n("option",{key:r,domProps:{value:t.id}},[e._v(e._s(t.com_name))])})),0)])]),e._v(" "),n("div",{staticClass:"form__row"},[e._m(1),e._v(" "),n("p",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{type:"text",disabled:2==e.step,placeholder:"【ご連絡】株式会社〇〇（注文番号：0000000-111）"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}})])])])]),e._v(" "),n("div",{staticClass:"message__part"},[n("p",{staticClass:"to_client"},[e._v("\n        "+e._s(e.calcCompany()?e.calcCompany().com_name:"〇〇〇〇")),n("br"),e._v("\n        "+e._s(e.calcCompany()?e.calcCompany().name:"〇〇〇〇")+"様\n      ")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],staticClass:"message_input",attrs:{disabled:2==e.step,placeholder:"メッセージ記入欄（在庫、納期等の連絡など）"},domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value)}}}),e._v(" "),n("div",{staticClass:"form__info"},[e._v("\n          ご注文はこちらから→"),n("a",[e._v("https://ukerundesu.com/client/order/detail?id="+e._s(e.$route.query.id))]),n("br"),e._v("\n          ログインID："+e._s(e.calcLoginId())),n("br")]),e._v(" "),n("div",{staticClass:"textarea"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.address_info,expression:"address_info"}],staticClass:"message_input",attrs:{disabled:2==e.step},domProps:{value:e.address_info},on:{keyup:e.keyupChange,input:function(t){t.target.composing||(e.address_info=t.target.value)}}}),e._v(" "),e.toggle?n("p",{staticClass:"placeholder"},[e._v("\n    署名や備考など記入欄"),n("br"),e._v("\n    —————————————————————————"),n("br"),e._v("\n    株式会社◯◯◯◯"),n("br"),e._v("\n    メールアドレス："),n("br"),e._v("\n    電話番号："),n("br"),e._v("\n    住所："),n("br"),e._v("\n    —————————————————————————\n  ")]):e._e()])]),e._v(" "),n("div",{staticClass:"actions"},[n("button",{on:{click:e.back}},[e._v("戻る")]),e._v(" "),n("button",{on:{click:e.next}},[e._v(e._s(1==e.step?"確認画面へ":"送信"))])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"d-flex contact_heading"},[t("h2",{staticClass:"page__title"},[this._v("取引先情報")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",[this._v("件名"),t("span",{staticClass:"must"},[this._v("必須")])])}],!1,null,"69ed368a",null);t.default=l.exports}}]);