(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{12:function(t,n,a){"use strict";var e={name:"ConfirmModal",props:["note","cancelText","okText","isDelete"],methods:{cancel:function(){this.$emit("cancel")},ok:function(){this.$emit("ok")}}},r=(a(428),a(3)),o=Object(r.a)(e,(function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"confirm__modal"},[a("div",{staticClass:"inner"},[a("p",{staticClass:"note"},[t._v(t._s(t.note))]),t._v(" "),1==t.isDelete?a("p",{staticClass:"attension"},[t._v("削除するとデータが完全に消去されます。")]):t._e(),t._v(" "),a("div",{staticClass:"actions"},[a("button",{on:{click:t.cancel}},[t._v(t._s(t.cancelText))]),t._v(" "),a("button",{on:{click:t.ok}},[t._v(t._s(t.okText))])])])])}),[],!1,null,"313dd1ef",null);n.a=o.exports},263:function(t,n,a){var e=a(429);"string"==typeof e&&(e=[[t.i,e,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(6)(e,r);e.locals&&(t.exports=e.locals)},277:function(t,n,a){var e=a(458);"string"==typeof e&&(e=[[t.i,e,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(6)(e,r);e.locals&&(t.exports=e.locals)},428:function(t,n,a){"use strict";a(263)},429:function(t,n,a){(t.exports=a(5)(!1)).push([t.i,".confirm__modal[data-v-313dd1ef] {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.16);\n  z-index: 200;\n}\n.confirm__modal .inner[data-v-313dd1ef] {\n  position: fixed;\n  z-index: 250;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  width: 400px;\n  border-radius: 5px;\n  border: 1px solid var(--border-color);\n  background-color: #fff;\n  padding: 50px 0 30px;\n}\n.actions[data-v-313dd1ef] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-top: 30px;\n}\n.actions button[data-v-313dd1ef] {\n  width: 180px;\n  height: 35px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.actions button[data-v-313dd1ef]:first-of-type {\n  margin-right: 10px;\n  border: 1px solid var(--border-color);\n}\n.actions button[data-v-313dd1ef]:nth-of-type(2) {\n  border: 0;\n  background-color: var(--accent-color);\n  color: #fff;\n}\n.note[data-v-313dd1ef] {\n  text-align: center;\n}\n.attension[data-v-313dd1ef] {\n  text-align: center;\n  color: #ff0000;\n  font-size: 12px;\n  margin-top: 10px;\n}",""])},457:function(t,n,a){"use strict";a(277)},458:function(t,n,a){(t.exports=a(5)(!1)).push([t.i,".mb-20[data-v-b91db052] {\n  margin-bottom: 20px;\n}\n.history__detail[data-v-b91db052] {\n  padding: 20px 30px;\n}\n.recipienter_info[data-v-b91db052] {\n  margin-top: 20px;\n  margin-left: 50px;\n  width: 430px;\n  border: 1px solid var(--border-color);\n  padding: 12px 14px;\n  border-radius: 4px;\n}\n.recipienter_info .page__title1 span[data-v-b91db052] {\n  margin-left: 40px;\n  font-size: 12px;\n}\n.recipienter_info .info[data-v-b91db052] {\n  margin-top: 12px;\n  margin-left: 20px;\n  font-size: 10px;\n}\n.table__part[data-v-b91db052] {\n  margin-top: 34px;\n  width: 860px;\n  margin-left: 50px;\n}\n.total__part[data-v-b91db052] {\n  display: flex;\n  margin-left: 50px;\n}\n.total__part .message__part[data-v-b91db052] {\n  width: 500px;\n  border: 1px solid var(--border-color);\n  padding: 15px;\n  background-color: #fff;\n}\n.total__part .message__part h4[data-v-b91db052] {\n  font-size: 14px;\n}\n.total__part .message__part textarea[data-v-b91db052] {\n  width: 100%;\n  display: block;\n  height: 78px;\n  border: 1px solid var(--border-color);\n  border-radius: 5px;\n  padding: 10px;\n  margin-top: 4px;\n  resize: none;\n  margin-bottom: 16px;\n}\n.total__part p input[data-v-b91db052], .total__part p select[data-v-b91db052] {\n  width: 200px;\n  height: 30px;\n  border: 1px solid var(--border-color);\n  padding-left: 5px;\n  padding-right: 5px;\n}\n.total__part .payment_method > label[data-v-b91db052] {\n  width: 100px;\n  display: flex;\n  align-items: center;\n}\n.total__part .payment_method > label span[data-v-b91db052] {\n  margin-left: auto;\n  width: 30px;\n  height: 20px;\n  background-color: #D34555;\n  color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n}\n.total__part .payment_method p[data-v-b91db052] {\n  display: flex;\n  align-items: center;\n}\n.total__part .payment_method p label[data-v-b91db052] {\n  display: flex;\n  margin-right: 5px;\n  font-size: 12px;\n}\n.total__part .payment_method p label input[data-v-b91db052] {\n  margin-right: 4px;\n  width: 15px;\n  height: 15px;\n}\n.total__part .calculator[data-v-b91db052] {\n  margin-bottom: 15px;\n  flex: 1;\n}\n.total__part .calculator .calc_row[data-v-b91db052] {\n  display: flex;\n  align-items: center;\n}\n.total__part .calculator .calc_row label[data-v-b91db052] {\n  flex: 1;\n  height: 50px;\n  border: 1px solid var(--border-color);\n  line-height: 50px;\n  padding-left: 10px;\n}\n.total__part .calculator .calc_row p[data-v-b91db052] {\n  text-align: right;\n  flex: 1;\n  height: 50px;\n  border: 1px solid var(--border-color);\n  line-height: 50px;\n  padding-right: 10px;\n}\n.total__part .calculator .calc__action[data-v-b91db052] {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  padding-top: 15px;\n}\n.total__part .calculator .calc__action button[data-v-b91db052] {\n  width: 180px;\n  height: 35px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.total__part .calculator .calc__action button.on[data-v-b91db052] {\n  background-color: var(--accent-color2);\n  color: #fff;\n  border: 0;\n}\n.total__part .calculator .calc__action button.back[data-v-b91db052] {\n  background-color: #fff;\n  border: 1px solid var(--border-color);\n}\n.total__part .calculator .calc__action.black[data-v-b91db052] {\n  margin-top: 50px;\n}\n.total__part .calculator .calc__action.black button[data-v-b91db052] {\n  background-color: #2A3039;\n  color: #fff;\n  border: 0;\n}\n.total__part .calculator .calc__action.black button img[data-v-b91db052] {\n  margin-right: 14px;\n  width: 20px;\n}\n.img[data-v-b91db052] {\n  display: flex;\n  width: 100px;\n}\n.img img[data-v-b91db052] {\n  width: 100%;\n}",""])},77:function(t,n,a){"use strict";a.r(n);var e=a(0),r=a.n(e),o=a(12);function c(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),a.push.apply(a,e)}return a}function i(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?c(Object(a),!0).forEach((function(n){l(t,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))}))}return t}function l(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function s(t,n,a,e,r,o,c){try{var i=t[o](c),l=i.value}catch(t){return void a(t)}i.done?n(l):Promise.resolve(l).then(e,r)}function d(t){return function(){var n=this,a=arguments;return new Promise((function(e,r){var o=t.apply(n,a);function c(t){s(o,e,r,c,i,"next",t)}function i(t){s(o,e,r,c,i,"throw",t)}c(void 0)}))}}var _=a(27),u={components:{ConfirmModal:o.a},layout:"client",data:function(){return{columns:[],rows:[],order_form:null,message:"",deadline:null,deadline_time:null,payment_method:null,card_token:null,bank_code:null,branch_code:null,account_type:null,account_number:null,account_name:null,bankList:[],branchList:[],isShowModal:!1,step:1,tax_type:1}},mounted:function(){this.loadBankList(),this.init()},methods:{back:function(){this.$router.back()},loadBankList:function(){var t=this;return d(r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.bankList=Object.values(_);case 1:case"end":return n.stop()}}),n)})))()},reOrder:function(){this.$router.push({name:"client.order.detail",query:{id:this.order_form.order_form.id}})},cancelBankPayment:function(){this.isShowModal=!1},okBankPayment:function(){var t=this;return d(r.a.mark((function n(){var a,e;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.isShowModal=!1,n.prev=1,n.next=4,axios.post("/api/bank_payment_proc",{id:t.$route.query.id});case 4:a=n.sent,e=a.data,t.$swal("","支払完了連絡を送りました。"),t.order_form=e.order_form,n.next=12;break;case 10:n.prev=10,n.t0=n.catch(1);case 12:case"end":return n.stop()}}),n,null,[[1,10]])})))()},bankPaymentFinish:function(){this.isShowModal=!0},getValue:function(t,n){var a=this.rows.find((function(t){return t.id==n})),e=null;return a.product_values.forEach((function(n){n.product_user_column.product_column.slug==t&&(e="number"==n.product_user_column.product_column.type?parseInt(n.value):n.value)})),e},getImageUrl:function(t){var n=this.rows.find((function(n){return n.id==t})),a=null;return n.product_values.forEach((function(t){"image"==t.product_user_column.product_column.slug&&(a=t.value_url)})),a||"/asset/no_image.svg"},calcTotalPrice:function(){var t=0;return this.rows.map((function(n){t+=n.price*n.amount})),parseInt(t)},init:function(){var t=this;return d(r.a.mark((function n(){var a,e,o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,axios.post("/api/get_order_detail",{id:t.$route.query.id});case 3:a=n.sent,e=a.data,t.bank_code=e.recipienter.bank_code,t.branch_code=e.recipienter.branch_code,t.account_type=e.recipienter.account_type,t.account_number=e.recipienter.account_number,t.account_name=e.recipienter.account_name,t.order_form=e.order_form,(o=e.columns.filter((function(t){return e.userColumns.length>0?1==e.userColumns.find((function(n){return n.product_column_id==t.id})).picked:1==t.picked})).map((function(t){if(e.userColumns.length>0){var n=e.userColumns.find((function(n){return n.product_column_id==t.id}));return i(i({},t),{},{order:n.order,tax:n.tax,tax_type:n.tax_type,name:n.nickname})}return t}))).sort((function(t,n){return t.order-n.order})),o.forEach((function(n){"total_price"!=n.slug&&("price"==n.slug?(t.columns.push({label:n.name+(1==n.tax_type?"（税抜）":2==n.tax_type?"（税込）":"（非課税）"),field:n.slug,sortable:"number"==n.type}),3!=n.tax_type&&2==n.tax&&t.columns.push({label:"軽減税率",field:"tax",sortable:!1,width:"60px"})):t.columns.push({label:n.name,field:n.slug,sortable:"number"==n.type}))})),t.rows=e.order_form_products.map((function(t){return i(i({},t.product),{},{price:t.price,amount:t.amount,tax:t.tax,tax_type:t.tax_type})})),n.next=19;break;case 17:n.prev=17,n.t0=n.catch(0);case 19:case"end":return n.stop()}}),n,null,[[0,17]])})))()},calcBankName:function(){var t=this,n=this.bankList.find((function(n){return n.code==t.bank_code}));return n?n.name:""},calcTaxFee8P:function(){var t=0;return this.rows.forEach((function(n){2==n.tax&&(t+=n.price*n.amount*.08)})),parseInt(t)},calcTaxFee10P:function(){var t=0;return this.rows.forEach((function(n){1==n.tax&&(t+=n.price*n.amount*.1)})),parseInt(t)},calcPrice8P:function(){var t=0;return this.rows.forEach((function(n){2==n.tax&&(t+=n.price*n.amount)})),parseInt(t)},calcPrice10P:function(){var t=0;return this.rows.forEach((function(n){1==n.tax&&(t+=n.price*n.amount)})),parseInt(t)},calcBranchName:function(){var t=this,n=this.bankList.find((function(n){return n.code==t.bank_code}));if(n){var a=Object.values(n.branches).find((function(n){return n.code==t.branch_code}));return a?a.name:""}return""},calcAccountType:function(){var t="";switch(this.account_type){case"1":t="普通預金";break;case"2":t="当座預金";break;case"3":t="貯蓄預金"}return t}}},p=(a(457),a(3)),f=Object(p.a)(u,(function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"history__detail"},[a("h2",{staticClass:"page__title1"},[t._v("発注履歴")]),t._v(" "),t.order_form?a("div",{staticClass:"recipienter_info"},[a("h2",{staticClass:"page__title1"},[t._v("発注先情報"),a("span",[t._v("株式会社"+t._s(t.order_form.order_form.name))])]),t._v(" "),a("div",{staticClass:"info"},[a("p",[t._v("注文番号　："+t._s(t.order_form.hash))]),t._v(" "),a("p",[t._v("注文日時　："+t._s(t._f("dateFormatFull")(t.order_form.updated_at)))])])]):t._e(),t._v(" "),a("div",{staticClass:"table__part"},[a("vue-good-table",{attrs:{columns:t.columns,rows:t.rows,"pagination-options":{enabled:!1}},scopedSlots:t._u([{key:"table-row",fn:function(n){return["mark"==n.column.field?a("div",[a("span",{staticClass:"mark"},[t._v(t._s(n.row.mark))])]):"is_public"==n.column.field?a("div",{staticClass:"toggle"},[a("toggle-button",{attrs:{width:88,value:0!=n.row.is_public,sync:!0,disabled:!0,color:{unchecked:"#707070",checked:"#337DFD"},labels:{unchecked:"非公開",checked:"公開"}}})],1):"name"==n.column.field?a("div",[a("span",[t._v(t._s(t.getValue("name",n.row.id)))])]):"price"==n.column.field?a("div",[a("span",[t._v(t._s(t._f("moneyFormat")(n.row.price))+"円")])]):"tax"==n.column.field?a("div",[a("span",[t._v(t._s(2==n.row.tax?"対象":""))])]):"amount"==n.column.field?a("div",[a("span",[t._v(t._s(t._f("moneyFormat")(n.row.amount)))])]):"total_price"==n.column.field?a("div",[a("span",[t._v(t._s(t._f("moneyFormat")(n.row.price*n.row.amount))+"円")])]):"remark"==n.column.field?a("div",[a("span",[t._v(t._s(t.getValue("remark",n.row.id)))])]):"maker"==n.column.field?a("div",[a("span",[t._v(t._s(t.getValue("maker",n.row.id)))])]):"color"==n.column.field?a("div",[a("span",[t._v(t._s(t.getValue("color",n.row.id)))])]):"size"==n.column.field?a("div",[a("span",[t._v(t._s(t.getValue("size",n.row.id)))])]):"unit"==n.column.field?a("div",[a("span",[t._v(t._s(t.getValue("unit",n.row.id)))])]):"image"==n.column.field?a("div",[a("span",{staticClass:"img"},[a("img",{attrs:{src:t.getImageUrl(n.row.id)}})])]):"jan"==n.column.field?a("div",[a("span",[t._v(t._s(t.getValue("jan",n.row.id)))])]):"order"==n.column.field?a("div",[a("span",[t._v(t._s(t.getValue("order",n.row.id)))])]):"free_space1"==n.column.field?a("div",[a("span",[t._v(t._s(t.getValue("free_space1",n.row.id)))])]):"free_space2"==n.column.field?a("div",[a("span",[t._v(t._s(t.getValue("free_space2",n.row.id)))])]):"free_space3"==n.column.field?a("div",[a("span",[t._v(t._s(t.getValue("free_space3",n.row.id)))])]):"delete"==n.column.field?a("div",[a("a",{staticClass:"delete_btn",on:{click:function(a){return t.cancelOrderedProduct(n.row.id)}}},[a("img",{attrs:{src:"/asset/icons/delete.svg"}})])]):a("div",{staticClass:"table_cell"},[t._v("\n          "+t._s(n.formattedRow[n.column.field])+"\n        ")])]}}])})],1),t._v(" "),t.order_form?a("div",{staticClass:"total__part"},[a("div",{staticClass:"message__part"},[a("h4",{staticClass:"mb-20"},[t._v("メッセージ")]),t._v(" "),a("p",{staticClass:"mb-20"},[t._v("\n          "+t._s(t.order_form.message)+"\n        ")]),t._v(" "),a("div",{staticClass:"d-flex mb-20 align-center"},[a("label",[t._v("希望納品時間：")]),t._v(" "),a("p",[t._v("\n            "+t._s(t._f("dateFormat")(t.order_form.deadline))+"\n          ")])]),t._v(" "),a("div",{staticClass:"d-flex mb-20 align-center"},[a("label",[t._v("希望納品時間：")]),t._v(" "),a("p",[t._v("\n            "+t._s(t.order_form.deadline_time)+"\n          ")])]),t._v(" "),a("div",{staticClass:"d-flex mb-20 payment_method"},[a("label",[t._v("支払方法")]),t._v(" "),a("p",[t._v("\n            "+t._s(1==t.order_form.payment_method?"銀行振込":"クレジットカード")+"\n          ")])]),t._v(" "),a("p",[t._v("\n          ＜振込先＞"),a("br"),t._v("\n          銀行名："+t._s(t.calcBankName())),a("br"),t._v("\n          支店名："+t._s(t.calcBranchName())),a("br"),t._v("\n          種類　："+t._s(t.calcAccountType())),a("br"),t._v("\n          口座番号："+t._s(t.account_number)),a("br"),t._v("\n          口座名義："+t._s(t.account_name)),a("br")])]),t._v(" "),a("div",{staticClass:"calculator"},[1==t.order_form.tax_type?a("div",{staticClass:"block"},[a("div",{staticClass:"calc_row"},[a("label",[t._v("小計（税抜）")]),t._v(" "),a("p",[t._v("￥"+t._s(t.calcTotalPrice()))])]),t._v(" "),a("div",{staticClass:"calc_row"},[a("label",[t._v("消費税（8％）")]),t._v(" "),a("p",[t._v("￥"+t._s(t.calcTaxFee8P()))])]),t._v(" "),a("div",{staticClass:"calc_row"},[a("label",[t._v("消費税（10％）")]),t._v(" "),a("p",[t._v("￥"+t._s(t.calcTaxFee10P()))])]),t._v(" "),a("div",{staticClass:"calc_row"},[a("label",[t._v("合計")]),t._v(" "),a("p",[t._v("￥"+t._s(t.calcTotalPrice()+t.calcTaxFee8P()+t.calcTaxFee10P()))])])]):t._e(),t._v(" "),2==t.order_form.tax_type?a("div",{staticClass:"block"},[a("div",{staticClass:"calc_row"},[a("label",[t._v("小計（8％）")]),t._v(" "),a("p",[t._v("￥"+t._s(t.calcPrice8P()))])]),t._v(" "),a("div",{staticClass:"calc_row"},[a("label",[t._v("小計（10％）")]),t._v(" "),a("p",[t._v("￥"+t._s(t.calcPrice10P()))])]),t._v(" "),a("div",{staticClass:"calc_row"},[a("label",[t._v("合計(税込)")]),t._v(" "),a("p",[t._v("￥"+t._s(t.calcPrice8P()+t.calcPrice10P()))])])]):t._e(),t._v(" "),3==t.order_form.tax_type?a("div",{staticClass:"block"},[a("div",{staticClass:"calc_row"},[a("label",[t._v("合計")]),t._v(" "),a("p",[t._v("￥"+t._s(t.calcTotalPrice()))])])]):t._e(),t._v(" "),1==t.order_form.invoiced&&0==t.order_form.payed?a("div",{staticClass:"calc__action"},[a("button",{staticClass:"on",on:{click:t.bankPaymentFinish}},[t._v("支払完了連絡")])]):t._e(),t._v(" "),a("div",{staticClass:"calc__action black"},[a("button",{on:{click:t.reOrder}},[a("img",{attrs:{src:"/asset/icons/output2.svg"}}),t._v("再発注")])]),t._v(" "),a("div",{staticClass:"calc__action"},[a("button",{staticClass:"back",on:{click:t.back}},[t._v("戻る")])])])]):t._e(),t._v(" "),t.isShowModal?a("ConfirmModal",{attrs:{note:"支払完了連絡を完了しますか？",cancelText:"キャンセル",okText:"支払完了"},on:{cancel:t.cancelBankPayment,ok:t.okBankPayment}}):t._e()],1)}),[],!1,null,"b91db052",null);n.default=f.exports}}]);