(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{12:function(t,e,a){"use strict";var n={name:"ConfirmModal",props:["note","cancelText","okText","isDelete"],methods:{cancel:function(){this.$emit("cancel")},ok:function(){this.$emit("ok")}}},r=(a(428),a(3)),o=Object(r.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"confirm__modal"},[a("div",{staticClass:"inner"},[a("p",{staticClass:"note"},[t._v(t._s(t.note))]),t._v(" "),1==t.isDelete?a("p",{staticClass:"attension"},[t._v("削除するとデータが完全に消去されます。")]):t._e(),t._v(" "),a("div",{staticClass:"actions"},[a("button",{on:{click:t.cancel}},[t._v(t._s(t.cancelText))]),t._v(" "),a("button",{on:{click:t.ok}},[t._v(t._s(t.okText))])])])])}),[],!1,null,"313dd1ef",null);e.a=o.exports},263:function(t,e,a){var n=a(429);"string"==typeof n&&(n=[[t.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(6)(n,r);n.locals&&(t.exports=n.locals)},282:function(t,e,a){var n=a(468);"string"==typeof n&&(n=[[t.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(6)(n,r);n.locals&&(t.exports=n.locals)},428:function(t,e,a){"use strict";a(263)},429:function(t,e,a){(t.exports=a(5)(!1)).push([t.i,".confirm__modal[data-v-313dd1ef] {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.16);\n  z-index: 200;\n}\n.confirm__modal .inner[data-v-313dd1ef] {\n  position: fixed;\n  z-index: 250;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  width: 400px;\n  border-radius: 5px;\n  border: 1px solid var(--border-color);\n  background-color: #fff;\n  padding: 50px 0 30px;\n}\n.actions[data-v-313dd1ef] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-top: 30px;\n}\n.actions button[data-v-313dd1ef] {\n  width: 180px;\n  height: 35px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.actions button[data-v-313dd1ef]:first-of-type {\n  margin-right: 10px;\n  border: 1px solid var(--border-color);\n}\n.actions button[data-v-313dd1ef]:nth-of-type(2) {\n  border: 0;\n  background-color: var(--accent-color);\n  color: #fff;\n}\n.note[data-v-313dd1ef] {\n  text-align: center;\n}\n.attension[data-v-313dd1ef] {\n  text-align: center;\n  color: #ff0000;\n  font-size: 12px;\n  margin-top: 10px;\n}",""])},467:function(t,e,a){"use strict";a(282)},468:function(t,e,a){(t.exports=a(5)(!1)).push([t.i,".align-center[data-v-3abadb76] {\n  align-items: center;\n}\n.mb-20[data-v-3abadb76] {\n  margin-bottom: 20px;\n}\n.order__detail_container[data-v-3abadb76] {\n  padding: 20px 30px;\n}\n.order__detail_container .heading[data-v-3abadb76] {\n  width: 910px;\n  align-items: center;\n}\n.order__detail_container .download_btn[data-v-3abadb76] {\n  border-radius: 5px;\n  background-color: #fff;\n  padding-left: 6px;\n  padding-right: 6px;\n  height: 25px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  margin-left: auto;\n  margin-right: 20px;\n  color: var(--text-color);\n  border: 1px solid var(--border-color);\n}\n.order__detail_container .download_btn img[data-v-3abadb76] {\n  margin-right: 6px;\n}\n.order__detail_container .status__part[data-v-3abadb76] {\n  padding-left: 50px;\n  display: flex;\n  padding-top: 20px;\n}\n.order__detail_container .status__part .panel[data-v-3abadb76] {\n  flex: 1;\n  border: 1px solid var(--border-color);\n  padding: 12px 16px;\n  border-radius: 5px;\n  background-color: #fff;\n}\n.order__detail_container .status__part .panel[data-v-3abadb76]:first-of-type {\n  margin-right: 30px;\n}\n.order__detail_container .status__part .panel .sub_title[data-v-3abadb76] {\n  margin-left: 30px;\n  font-size: 14px;\n}\n.order__detail_container .status__part .panel .panel__info[data-v-3abadb76] {\n  margin-top: 12px;\n  width: 100%;\n}\n.order__detail_container .status__part .panel .panel__info .panel__row[data-v-3abadb76] {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  margin-bottom: 4px;\n}\n.order__detail_container .status__part .panel .panel__info .panel__row label[data-v-3abadb76] {\n  font-size: 12px;\n  margin-right: 10px;\n}\n.order__detail_container .status__part .panel .panel__info .panel__row p[data-v-3abadb76] {\n  flex: 1;\n}\n.order__detail_container .status__part .panel .panel__info .contactClient[data-v-3abadb76] {\n  display: flex;\n  align-items: center;\n  font-size: 12px;\n  color: #337DFD;\n  margin-left: auto;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n}\n.order__detail_container .status__part .panel .panel__info .contactClient img[data-v-3abadb76] {\n  margin-right: 5px;\n  font-size: 12px;\n  color: 15px;\n  margin-right: 5px;\n}\n.order__detail_container .detail__part .detail__table[data-v-3abadb76] {\n  padding-top: 25px;\n}\n.order__detail_container .detail__part .detail__table .remark input[data-v-3abadb76] {\n  height: 30px;\n  border: 1px solid var(--border-color);\n}\n.order__detail_container .detail__part .total__part[data-v-3abadb76] {\n  display: flex;\n}\n.order__detail_container .detail__part .total__part .message__part[data-v-3abadb76] {\n  width: 500px;\n  border: 1px solid var(--border-color);\n  padding: 15px;\n  background-color: #fff;\n}\n.order__detail_container .detail__part .total__part .message__part h4[data-v-3abadb76] {\n  font-size: 14px;\n}\n.order__detail_container .detail__part .total__part .message__part textarea[data-v-3abadb76] {\n  width: 100%;\n  display: block;\n  height: 78px;\n  border: 1px solid var(--border-color);\n  border-radius: 5px;\n  padding: 10px;\n  margin-top: 4px;\n  resize: none;\n  margin-bottom: 16px;\n}\n.order__detail_container .detail__part .total__part p input[data-v-3abadb76], .order__detail_container .detail__part .total__part p select[data-v-3abadb76] {\n  width: 200px;\n  height: 30px;\n  border: 1px solid var(--border-color);\n  padding-left: 5px;\n  padding-right: 5px;\n}\n.order__detail_container .detail__part .total__part .payment_method > label[data-v-3abadb76] {\n  width: 100px;\n  display: flex;\n  align-items: center;\n}\n.order__detail_container .detail__part .total__part .payment_method > label span[data-v-3abadb76] {\n  margin-left: auto;\n  width: 30px;\n  height: 20px;\n  background-color: #D34555;\n  color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n}\n.order__detail_container .detail__part .total__part .payment_method p[data-v-3abadb76] {\n  display: flex;\n  align-items: center;\n}\n.order__detail_container .detail__part .total__part .payment_method p label[data-v-3abadb76] {\n  display: flex;\n  margin-right: 5px;\n  font-size: 12px;\n}\n.order__detail_container .detail__part .total__part .payment_method p label input[data-v-3abadb76] {\n  margin-right: 4px;\n  width: 15px;\n  height: 15px;\n}\n.order__detail_container .detail__part .total__part .calculator[data-v-3abadb76] {\n  margin-bottom: 15px;\n  flex: 1;\n}\n.order__detail_container .detail__part .total__part .calculator .calc_row[data-v-3abadb76] {\n  display: flex;\n  align-items: center;\n}\n.order__detail_container .detail__part .total__part .calculator .calc_row label[data-v-3abadb76] {\n  flex: 1;\n  height: 50px;\n  border: 1px solid var(--border-color);\n  line-height: 50px;\n  padding-left: 10px;\n}\n.order__detail_container .detail__part .total__part .calculator .calc_row p[data-v-3abadb76] {\n  text-align: right;\n  flex: 1;\n  height: 50px;\n  border: 1px solid var(--border-color);\n  line-height: 50px;\n  padding-right: 10px;\n}\n.order__detail_container .detail__part .total__part .calculator .calc__action[data-v-3abadb76] {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  padding-top: 15px;\n}\n.order__detail_container .detail__part .total__part .calculator .calc__action button[data-v-3abadb76] {\n  width: 180px;\n  height: 35px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.order__detail_container .detail__part .total__part .calculator .calc__action button.on[data-v-3abadb76] {\n  background-color: var(--accent-color2);\n  color: #fff;\n  border: 0;\n}\n.order__detail_container .detail__part .total__part .calculator .calc__action button.back[data-v-3abadb76] {\n  background-color: #fff;\n  border: 1px solid var(--border-color);\n}\n.search__form[data-v-3abadb76] {\n  width: 650px;\n  border: 1px solid var(--border-color);\n  padding: 8px 10px;\n  background-color: #fff;\n  border-radius: 5px;\n  margin-bottom: 30px;\n  margin-top: 20px;\n}\n.search__form .form__row[data-v-3abadb76] {\n  margin-right: 15px;\n  width: 200px;\n}\n.search__form .form__row.mr-0[data-v-3abadb76] {\n  margin-right: 0;\n}\n.search__form .form__row input[data-v-3abadb76], .search__form .form__row select[data-v-3abadb76] {\n  height: 30px;\n  flex: 1;\n  border: 1px solid var(--border-color);\n  padding-left: 6px;\n  padding-right: 6px;\n  font-size: 14px;\n}\n.search__form .deparate[data-v-3abadb76] {\n  font-size: 16px;\n  width: 20px;\n  text-align: center;\n}\n.search__form .form__action[data-v-3abadb76] {\n  margin-left: auto;\n  margin-right: auto;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n}\n.search__form .form__action button[data-v-3abadb76] {\n  width: 120px;\n  height: 30px;\n  background-color: var(--accent-color2);\n  color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  border: 0;\n  font-weight: bold;\n  cursor: pointer;\n}\n.search__form .mark[data-v-3abadb76] {\n  align-items: center;\n}\n.search__form .mark label[data-v-3abadb76] {\n  width: 80px;\n}\n.search__form .mark p select[data-v-3abadb76] {\n  width: 120px;\n  height: 30px;\n  border: 1px solid var(--border-color);\n  padding-left: 6px;\n  padding-right: 6px;\n  font-size: 14px;\n}\n.bank_payment_finish_btn[data-v-3abadb76] {\n  width: 180px;\n  height: 35px;\n  background-color: #D6A41A;\n  color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 0;\n  margin-top: 20px;\n  margin-left: auto;\n  margin-right: auto;\n}\n.img[data-v-3abadb76] {\n  display: flex;\n  width: 100px;\n}\n.img img[data-v-3abadb76] {\n  width: 100%;\n}",""])},80:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(12);function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){d(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function d(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e,a,n,r,o,i){try{var c=t[o](i),d=c.value}catch(t){return void a(t)}c.done?e(d):Promise.resolve(d).then(n,r)}function s(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var o=t.apply(e,a);function i(t){l(o,n,r,i,c,"next",t)}function c(t){l(o,n,r,i,c,"throw",t)}i(void 0)}))}}var _=a(27),p={layout:"client",middleware:"auth",components:{ConfirmModal:o.a},data:function(){return{columns:[],rows:[],order_form:null,order:null,message:"",deadline:null,deadline_time:null,payment_method:1,card_token:null,bank_code:null,branch_code:null,account_type:null,account_number:null,account_name:null,bankList:[],branchList:[],isShowModal:!1,tax:1,tax_type:1,step:1,isTableShow:!1,recipienter:null}},mounted:function(){var t=this;return s(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadBankList();case 2:t.init();case 3:case"end":return e.stop()}}),e)})))()},methods:{payPrice:function(){return 1==this.tax_type?this.calcTotalPrice()+this.calcTaxFee8P()+this.calcTaxFee10P():2==this.tax_type?this.calcPrice8P()+this.calcPrice10P():this.calcTotalPrice()},next:function(){if(1==this.step){if(!(1!=this.order_form.has_deadline||this.deadline&&this.deadline_time))return void this.$swal("","希望納品日と希望納品時間を入力して下さい");if(2==this.payment_method&&!this.card_token)return void this.$swal("","クレジットカードの場合カード情報を入力してください");if(0==this.rows.filter((function(t){return t.ordered_amount>0})).length)return void this.$swal("","購入する商品の個数を設定してください");this.step=2}else this.sendOrderProc()},sendOrderProc:function(){var t=this;return s(r.a.mark((function e(){var a,n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=0,a=1==t.tax_type?t.calcTotalPrice()+t.calcTaxFee8P()+t.calcTaxFee10P():2==t.tax_type?t.calcPrice8P()+t.calcPrice10P():t.calcTotalPrice(),e.prev=2,2!=t.payment_method){e.next=12;break}return e.next=6,axios.post("/api/provisional_payment",{token:t.card_token,id:t.$route.query.id,price:a});case 6:n=e.sent,o=n.data,t.order=o.order,t.sendOrderProcConfirm(),e.next=13;break;case 12:t.sendOrderProcConfirm();case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(2);case 17:case"end":return e.stop()}}),e,null,[[2,15]])})))()},sendOrderProcConfirm:function(){var t=this;return s(r.a.mark((function e(){var a,n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,a=1==t.tax_type?t.calcTotalPrice()+t.calcTaxFee8P()+t.calcTaxFee10P():2==t.tax_type?t.calcPrice8P()+t.calcPrice10P():t.calcTotalPrice(),e.prev=2,e.next=5,axios.post("/api/send_order_proc",{id:t.$route.query.id,message:t.message,deadline:t.deadline,deadline_time:t.deadline_time,order_id:t.order?t.order.id:null,tax:t.tax,tax_type:t.tax_type,price:a});case 5:n=e.sent,o=n.data,t.saveOrderProduct(o.order),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,10]])})))()},saveOrderProduct:function(t){var e=this;return s(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all(e.rows.map(function(){var a=s(r.a.mark((function a(n){var o;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,axios.post("/api/save_order_product",{template_id:t.id,product_id:n.id,price:e.getValue("price",n.id),amount:n.ordered_amount,tax:n.tax,tax_type:n.tax_type,recipienter_id:e.order_form.recipienter_id});case 2:o=a.sent,o.data;case 4:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()));case 2:e.$swal("","発注しました。"),e.$router.push({name:"client.history"});case 4:case"end":return a.stop()}}),a)})))()},back:function(){2==this.step?this.step=1:this.$router.back()},cancelBankPayment:function(){this.isShowModal=!1},changedOrderAmount:function(t,e,a){var n=this,r=this.rows.slice();r=r.map((function(r,o){return e==o?t.target.value>parseInt(n.getValue("amount",a))?r:c(c({},r),{},{ordered_amount:parseInt(t.target.value),total_price:parseInt(t.target.value)*parseInt(n.getValue("price",a))}):r})),this.rows=r},okBankPayment:function(){var t=this;return s(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isShowModal=!1,e.prev=1,e.next=4,axios.post("/api/bank_payment_proc",{id:t.$route.query.id});case 4:a=e.sent,n=a.data,t.order_form=n.order_form,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))()},loadBankList:function(){var t=this;return s(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.bankList=Object.values(_);case 1:case"end":return e.stop()}}),e)})))()},calcBankName:function(){var t=this,e=this.bankList.find((function(e){return e.code==t.bank_code}));return e?e.name:""},calcBranchName:function(){var t=this,e=this.bankList.find((function(e){return e.code==t.bank_code}));if(e){var a=Object.values(e.branches).find((function(e){return e.code==t.branch_code}));return a?a.name:""}return""},calcAccountType:function(){var t="";switch(this.account_type){case"1":t="普通預金";break;case"2":t="当座預金";break;case"3":t="貯蓄預金"}return t},onTokenCreated:function(t){this.recipienter.tenant_id?this.card_token=t.id:this.$swal("","受注者のPayjpアカウントに問題があります")},provisionalPayment:function(){var t=this;return s(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.post("/api/provisional_payment",{token:t.card_token,id:t.$route.query.id,price:t.payPrice()});case 3:a=e.sent,n=a.data,t.order=n.order,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},calcTotalPrice:function(){var t=0;return this.rows.map((function(e){t+=e.total_price})),parseInt(t)},calcTaxFee8P:function(){var t=0;return this.rows.forEach((function(e){2==e.tax&&(t+=.08*e.total_price)})),parseInt(t)},calcTaxFee10P:function(){var t=0;return this.rows.forEach((function(e){1==e.tax&&(t+=.1*e.total_price)})),parseInt(t)},calcPrice8P:function(){var t=0;return this.rows.forEach((function(e){2==e.tax&&(t+=e.total_price)})),parseInt(t)},calcPrice10P:function(){var t=0;return this.rows.forEach((function(e){1==e.tax&&(t+=e.total_price)})),parseInt(t)},onTokenFailed:function(){this.$swal("","カード情報に問題があります")},init:function(){var t=this;return s(r.a.mark((function e(){var a,n,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isTableShow=!1,e.prev=1,e.next=4,axios.post("/api/get_order_form_detail",{id:t.$route.query.id});case 4:a=e.sent,n=a.data,t.tax_type=n.tax_type,t.bank_code=n.recipienter.bank_code,t.branch_code=n.recipienter.branch_code,t.account_type=n.recipienter.account_type,t.account_number=n.recipienter.account_number,t.account_name=n.recipienter.account_name,t.recipienter=n.recipienter,t.order_form=n.order_form,(o=n.userColumns.find((function(t){return"発注単価（税抜）"==t.nickname})))&&(t.tax=o.tax),(i=n.columns.filter((function(t){return n.userColumns.length>0?1==n.userColumns.find((function(e){return e.product_column_id==t.id})).picked:1==t.picked})).map((function(t){if(n.userColumns.length>0){var e=n.userColumns.find((function(e){return e.product_column_id==t.id}));return c(c({},t),{},{order:e.order,tax:e.tax,tax_type:e.tax_type,name:e.nickname})}return c({},t)}))).sort((function(t,e){return t.order-e.order})),i.forEach((function(e){"total_price"!=e.slug&&("price"==e.slug?(t.columns.push({label:e.name+(1==e.tax_type?"（税抜）":2==e.tax_type?"（税込）":"（非課税）"),field:e.slug,sortable:"number"==e.type}),3!=e.tax_type&&2==e.tax&&t.columns.push({label:"軽減税率",field:"tax",sortable:!1,width:"60px"})):t.columns.push({label:e.name,field:e.slug,sortable:"number"==e.type}))})),t.rows=n.products.filter((function(t){return 1==t.is_public})).map((function(t){return c(c({},t),{},{ordered_amount:0,total_price:0})})),t.isTableShow=!0,e.next=25;break;case 23:e.prev=23,e.t0=e.catch(1);case 25:case"end":return e.stop()}}),e,null,[[1,23]])})))()},getValue:function(t,e){var a=this.rows.find((function(t){return t.id==e})),n=null;return a.product_values.forEach((function(e){e.product_user_column.product_column.slug==t&&(n="number"==e.product_user_column.product_column.type?parseInt(e.value):e.value)})),n&&"null"!=n?n:""},getImageUrl:function(t){var e=this.rows.find((function(e){return e.id==t})),a=null;return e.product_values.forEach((function(t){"image"==t.product_user_column.product_column.slug&&(a=t.value_url)})),a||"/asset/no_image.svg"},bankPaymentFinish:function(){this.isShowModal=!0}}},u=(a(467),a(3)),f=Object(u.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order__detail_container"},[a("div",{staticClass:"d-flex heading"},[t.order_form?a("h2",{staticClass:"page__title1"},[t._v("注文フォーム名　："+t._s(t.order_form.name))]):t._e()]),t._v(" "),a("div",{staticClass:"detail__part"},[t.isTableShow?a("div",{staticClass:"detail__table"},[a("vue-good-table",{attrs:{columns:t.columns,rows:t.rows,"pagination-options":{enabled:!1}},scopedSlots:t._u([{key:"table-row",fn:function(e){return["mark"==e.column.field?a("div",[a("span",{staticClass:"mark"},[t._v(t._s(e.row.mark))])]):"is_public"==e.column.field?a("div",{staticClass:"toggle"},[a("toggle-button",{attrs:{width:88,value:0!=e.row.is_public,sync:!0,disabled:!0,color:{unchecked:"#707070",checked:"#337DFD"},labels:{unchecked:"非公開",checked:"公開"}}})],1):"name"==e.column.field?a("div",[a("span",[t._v(t._s(t.getValue("name",e.row.id)))])]):"price"==e.column.field?a("div",[a("span",[t._v(t._s(t._f("moneyFormat")(t.getValue("price",e.row.id)))+"円")])]):"tax"==e.column.field?a("div",[a("span",[t._v(t._s(2==e.row.tax?"対象":""))])]):"amount"==e.column.field?a("div",[a("span",[a("input",{attrs:{type:"number",min:0,max:parseInt(t.getValue("amount",e.row.id))},domProps:{value:e.row.ordered_amount},on:{change:function(a){return t.changedOrderAmount(a,e.index,e.row.id)}}})])]):"total_price"==e.column.field?a("div",[a("span",[t._v(t._s(t._f("moneyFormat")(e.row.total_price?e.row.total_price:""))+t._s(e.row.total_price?"円":""))])]):"remark"==e.column.field?a("div",[a("span",[t._v(t._s(t.getValue("remark",e.row.id)))])]):"maker"==e.column.field?a("div",[a("span",[t._v(t._s(t.getValue("maker",e.row.id)))])]):"color"==e.column.field?a("div",[a("span",[t._v(t._s(t.getValue("color",e.row.id)))])]):"size"==e.column.field?a("div",[a("span",[t._v(t._s(t.getValue("size",e.row.id)))])]):"unit"==e.column.field?a("div",[a("span",[t._v(t._s(t.getValue("unit",e.row.id)))])]):"image"==e.column.field?a("div",[a("span",{staticClass:"img"},[a("img",{attrs:{src:t.getImageUrl(e.row.id)}})])]):"jan"==e.column.field?a("div",[a("span",[t._v(t._s(t.getValue("jan",e.row.id)))])]):"order"==e.column.field?a("div",[a("span",[t._v(t._s(t.getValue("order",e.row.id)))])]):"free_space1"==e.column.field?a("div",[a("span",[t._v(t._s(t.getValue("free_space1",e.row.id)))])]):"free_space2"==e.column.field?a("div",[a("span",[t._v(t._s(t.getValue("free_space2",e.row.id)))])]):"free_space3"==e.column.field?a("div",[a("span",[t._v(t._s(t.getValue("free_space3",e.row.id)))])]):"delete"==e.column.field?a("div",[a("a",{staticClass:"delete_btn",on:{click:function(a){return t.cancelOrderedProduct(e.row.id)}}},[a("img",{attrs:{src:"/asset/icons/delete.svg"}})])]):a("div",{staticClass:"table_cell"},[t._v("\n            "+t._s(e.formattedRow[e.column.field])+"\n          ")])]}}],null,!1,1701315050)})],1):t._e(),t._v(" "),a("div",{staticClass:"total__part"},[t.order_form?a("div",{staticClass:"message__part"},[a("h4",[t._v("メッセージ")]),t._v(" "),a("p",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{disabled:2==t.step},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})]),t._v(" "),1==t.order_form.has_deadline?a("div",{staticClass:"d-flex mb-20 align-center"},[a("label",[t._v("希望納品日：")]),t._v(" "),a("p",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.deadline,expression:"deadline"}],attrs:{type:"date",disabled:2==t.step},domProps:{value:t.deadline},on:{input:function(e){e.target.composing||(t.deadline=e.target.value)}}})])]):t._e(),t._v(" "),1==t.order_form.has_deadline?a("div",{staticClass:"d-flex mb-20 align-center"},[a("label",[t._v("希望納品時間：")]),t._v(" "),a("p",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.deadline_time,expression:"deadline_time"}],attrs:{disabled:2==t.step},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.deadline_time=e.target.multiple?a:a[0]}}},[a("option",[t._v("時間指定なし")]),t._v(" "),a("option",[t._v("午前中")]),t._v(" "),a("option",[t._v("12時〜14時")]),t._v(" "),a("option",[t._v("14時〜16時")]),t._v(" "),a("option",[t._v("16時〜18時")]),t._v(" "),a("option",[t._v("18時〜20時")])])])]):t._e(),t._v(" "),a("div",{staticClass:"d-flex mb-20 payment_method"},[t._m(0),t._v(" "),1==t.step?a("p",[1==t.order_form.payment_method||3==t.order_form.payment_method?a("label",[a("input",{attrs:{type:"radio",name:"payment_method"},domProps:{checked:1==t.payment_method},on:{click:function(){t.payment_method=1}}}),t._v("銀行振込")]):t._e(),t._v(" "),2==t.order_form.payment_method||3==t.order_form.payment_method?a("label",[a("input",{attrs:{type:"radio",name:"payment_method"},domProps:{checked:2==t.payment_method},on:{click:function(){t.payment_method=2}}}),t._v("クレジットカード")]):t._e()]):t._e(),t._v(" "),2==t.step?a("p",[t._v("\n            "+t._s(1==t.payment_method?"銀行振込":"クレジットカード")+"\n          ")]):t._e()]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.payment_method,expression:"payment_method == 1"}],staticClass:"card_info"},[t._v("\n            ＜振込先＞"),a("br"),t._v("\n            銀行名："+t._s(t.calcBankName())),a("br"),t._v("\n            支店名："+t._s(t.calcBranchName())),a("br"),t._v("\n            種類　："+t._s(t.calcAccountType())),a("br"),t._v("\n            口座番号："+t._s(t.account_number)),a("br"),t._v("\n            口座名義："+t._s(t.account_name)),a("br")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.payment_method,expression:"payment_method == 2"}],staticClass:"card_info"},[a("payjp-checkout",{attrs:{"api-key":"pk_live_fb2eaf140089677e891d772a",text:"ポップアップを開く","submit-text":"クレジットカードで支払い","name-placeholder":"田中健太郎"},on:{created:t.onTokenCreated,failed:t.onTokenFailed}})],1)]):t._e(),t._v(" "),a("div",{staticClass:"calculator"},[1==t.tax_type?a("div",{staticClass:"block"},[a("div",{staticClass:"calc_row"},[a("label",[t._v("小計（税抜）")]),t._v(" "),a("p",[t._v("￥"+t._s(t.calcTotalPrice()))])]),t._v(" "),a("div",{staticClass:"calc_row"},[a("label",[t._v("消費税（8％）")]),t._v(" "),a("p",[t._v("￥"+t._s(t.calcTaxFee8P()))])]),t._v(" "),a("div",{staticClass:"calc_row"},[a("label",[t._v("消費税（10％）")]),t._v(" "),a("p",[t._v("￥"+t._s(t.calcTaxFee10P()))])]),t._v(" "),a("div",{staticClass:"calc_row"},[a("label",[t._v("合計")]),t._v(" "),a("p",[t._v("￥"+t._s(t.calcTotalPrice()+t.calcTaxFee8P()+t.calcTaxFee10P()))])])]):t._e(),t._v(" "),2==t.tax_type?a("div",{staticClass:"block"},[a("div",{staticClass:"calc_row"},[a("label",[t._v("小計（8％）")]),t._v(" "),a("p",[t._v("￥"+t._s(t.calcPrice8P()))])]),t._v(" "),a("div",{staticClass:"calc_row"},[a("label",[t._v("小計（10％）")]),t._v(" "),a("p",[t._v("￥"+t._s(t.calcPrice10P()))])]),t._v(" "),a("div",{staticClass:"calc_row"},[a("label",[t._v("合計(税込)")]),t._v(" "),a("p",[t._v("￥"+t._s(t.calcPrice8P()+t.calcPrice10P()))])])]):t._e(),t._v(" "),3==t.tax_type?a("div",{staticClass:"block"},[a("div",{staticClass:"calc_row"},[a("label",[t._v("合計")]),t._v(" "),a("p",[t._v("￥"+t._s(t.calcTotalPrice()))])])]):t._e(),t._v(" "),a("div",{staticClass:"calc__action"},[a("button",{staticClass:"on",on:{click:t.next}},[t._v(t._s(1==t.step?"確認画面":"発注"))])]),t._v(" "),a("div",{staticClass:"calc__action"},[a("button",{staticClass:"back",on:{click:t.back}},[t._v("戻る")])])])])]),t._v(" "),t.isShowModal?a("ConfirmModal",{attrs:{note:"支払完了連絡を完了しますか？",cancelText:"キャンセル",okText:"支払完了"},on:{cancel:t.cancelBankPayment,ok:t.okBankPayment}}):t._e()],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("label",[this._v("支払方法"),e("span",[this._v("必須")])])}],!1,null,"3abadb76",null);e.default=f.exports}}]);